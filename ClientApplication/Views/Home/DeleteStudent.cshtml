@* @{
    ViewData["Title"] = "Delete Student";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Delete Student</h1>

<div id="studentDetails">
    <p><strong>ID:</strong> <span id="studentId"></span></p>
    <p><strong>Name:</strong> <span id="studentName"></span></p>
    <p><strong>Date of Birth:</strong> <span id="dateOfBirth"></span></p>
    <p><strong>Phone:</strong> <span id="studentPhone"></span></p>
    <p><strong>Address:</strong> <span id="studentAddress"></span></p>
    <p><strong>Email:</strong> <span id="studentEmail"></span></p>
</div>

<div>
    <button id="deleteBtn" class="btn btn-danger">Delete</button>
    <a href="/Home/AdminDashboard" class="btn btn-secondary">Cancel</a>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            var studentId = new URLSearchParams(window.location.search).get('id');

            function populateStudentDetails(studentId) {
                $.ajax({
                    type: "GET",
                    url: "https://localhost:7284/Students/" + studentId,
                    contentType: "application/json",
                    success: function (student) {
                        $('#studentId').text(student.studentId);
                        $('#studentName').text(student.studentName);
                        $('#dateOfBirth').text(student.dateOfBirth);
                        $('#studentPhone').text(student.studentPhone);
                        $('#studentAddress').text(student.studentAddress);
                        $('#studentEmail').text(student.studentEmail);
                    },
                    error: function (xhr, status, error) {
                        console.log(xhr.responseText);
                    }
                });
            }

            if (studentId) {
                populateStudentDetails(studentId);
            }

            $('#deleteBtn').click(function () {
                var confirmDelete = confirm("Are you sure you want to delete this student?");
                if (confirmDelete) {
                    $.ajax({
                        type: "DELETE",
                        url: "https://localhost:7284/Students/" + studentId,
                        contentType: "application/json",
                        success: function (response) {
                            alert('Student deleted successfully');
                            window.location.href = '/Home/AdminDashboard';
                        },
                        error: function (xhr, status, error) {
                            console.log(xhr.responseText);
                        }
                    });
                }
            });
        });
    </script>
}
 *@

@{
    ViewData["Title"] = "Delete Student";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    /* Set background color and font color */
    body {
        background-color: #f8f9fa; /* Background color */
        color: #000000; /* Font color */
    }

    /* CSS styles for student details container */
    #studentDetails {
        background-color: #ffffff; /* Container background color */
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Add box shadow */
        width: 50%; /* Set width to 50% of the viewport */
        margin: 20px auto; /* Center align horizontally */
    }

        #studentDetails p {
            margin-bottom: 10px; /* Add margin between paragraphs */
        }

    /* Center align the header */
    h1 {
        text-align: center; /* Center align the text */
    }

    /* Button styles */
    .btn {
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add shadow effect */
        transition: box-shadow 0.3s; /* Add transition for smooth effect */
    }

        .btn:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add floating effect on hover */
        }

    /* Delete button specific styles */
    .btn-danger {
        background-color: #dc3545; /* Button background color */
        border-color: #dc3545; /* Button border color */
    }

        .btn-danger:hover {
            background-color: #c82333; /* Button hover background color */
            border-color: #bd2130; /* Button hover border color */
        }

        .btn-danger:focus {
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.5); /* Button focus box shadow */
        }

    /* Cancel button specific styles */
    .btn-secondary {
        background-color: #6c757d; /* Button background color */
        border-color: #6c757d; /* Button border color */
    }

        .btn-secondary:hover {
            background-color: #5a6268; /* Button hover background color */
            border-color: #545b62; /* Button hover border color */
        }

        .btn-secondary:focus {
            box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.5); /* Button focus box shadow */
        }
</style>

<h1>Delete Student</h1>

<div id="studentDetails">
    <p><strong>ID:</strong> <span id="studentId"></span></p>
    <p><strong>Name:</strong> <span id="studentName"></span></p>
    <p><strong>Date of Birth:</strong> <span id="dateOfBirth"></span></p>
    <p><strong>Phone:</strong> <span id="studentPhone"></span></p>
    <p><strong>Address:</strong> <span id="studentAddress"></span></p>
    <p><strong>Email:</strong> <span id="studentEmail"></span></p>
</div>

<div style="text-align: center;">
    <button id="deleteBtn" class="btn btn-danger">Delete</button>
    <a href="/Home/AdminDashboard" class="btn btn-secondary">Cancel</a>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            var studentId = new URLSearchParams(window.location.search).get('id');

            function populateStudentDetails(studentId) {
                $.ajax({
                    type: "GET",
                    url: "https://localhost:7284/Students/" + studentId,
                    contentType: "application/json",
                    success: function (student) {
                        $('#studentId').text(student.studentId);
                        $('#studentName').text(student.studentName);
                        $('#dateOfBirth').text(student.dateOfBirth);
                        $('#studentPhone').text(student.studentPhone);
                        $('#studentAddress').text(student.studentAddress);
                        $('#studentEmail').text(student.studentEmail);
                    },
                    error: function (xhr, status, error) {
                        console.log(xhr.responseText);
                    }
                });
            }

            if (studentId) {
                populateStudentDetails(studentId);
            }

            $('#deleteBtn').click(function () {
                var confirmDelete = confirm("Are you sure you want to delete this student?");
                if (confirmDelete) {
                    $.ajax({
                        type: "DELETE",
                        url: "https://localhost:7284/Students/" + studentId,
                        contentType: "application/json",
                        success: function (response) {
                            alert('Student deleted successfully');
                            window.location.href = '/Home/AdminDashboard';
                        },
                        error: function (xhr, status, error) {
                            console.log(xhr.responseText);
                        }
                    });
                }
            });
        });
    </script>
}
